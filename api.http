###
### 1. Đăng ký người dùng mới (chỉ cần chạy một lần)
POST http://localhost:5000/api/auth/register
Content-Type: application/json

{
  "username": "Test User 3",
  "email": "test3@example.com",
  "password": "password123"
}

###

### 2. Đăng nhập để lấy Token (Sử dụng cú pháp gán biến chuẩn)
# @name login
POST http://localhost:5000/api/auth/login
Content-Type: application/json

{
  "email": "test2@example.com",
  "password": "password123"
}

###
# Gán token từ response của request 'login' vào biến @token
@token = {{login.response.body.token}}

###

### 3. Lấy tất cả câu hỏi (Để lấy ID cho bài thi)
GET http://localhost:5000/api/questions
Authorization: Bearer {{token}}

###

### 4. Tạo bài thi mới (Sử dụng cú pháp gán biến chuẩn)
# @name createExam
POST http://localhost:5000/api/exams
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "title": "TOEIC Mini Test - Part 5",
  "type": "TOEIC",
  "duration": 15,
  "sections": [
    {
      "sectionName": "Part 5: Incomplete Sentences",
      "description": "Chọn từ hoặc cụm từ đúng nhất để hoàn thành câu.",
      "questionList": [
        "667bb4786d55737b8332194b",
        "667bb4786d55737b8332194c",
        "667bb4786d55737b8332194d"
      ]
    }
  ],
  "metadata": {
    "difficulty": "Medium",
    "isPublished": false
  }
}

###
# Gán ID bài thi từ response của request 'createExam' vào biến @examId
@examId = {{createExam.response.body.data.exam._id}}

###

### 5. Lấy thông tin chi tiết một bài thi
GET http://localhost:5000/api/exams/{{examId}}
Authorization: Bearer {{token}}


###

### 6. Import câu hỏi (Yêu cầu xác thực)
POST http://localhost:5000/api/questions/import
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "questions": [
    {
      "category": "TOEIC", "part": 5, "format": "MULTIPLE_CHOICE", "metadata": { "level": "Easy" },
      "subQuestions": [{ "content": "Mr. Kim is a _______ respected member of the community.", "options": ["high", "highly", "higher", "height"], "correctAnswer": ["highly"], "explanation": "Trạng từ 'highly' bổ nghĩa cho động từ 'respected'." }]
    }
  ]
}

###

### 7. Đăng xuất (Yêu cầu xác thực)
POST http://localhost:5000/api/auth/logout
Authorization: Bearer {{token}}

###

### 8. Kiểm tra Gemini API (Route chung)
POST http://localhost:5000/api/generate
Content-Type: application/json

{
  "prompt": "viết 1 câu chuyện hài về đời sống vợ chồng mới nhất"
}

###

### 9. Tạo câu hỏi bằng AI (Tính năng mới)
# @name generateQuestion
POST http://localhost:5000/api/questions/generate
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "topic": "Vocabulary",
  "level": "Medium",
  "part": 5,
  "category": "TOEIC",
  "format": "MULTIPLE_CHOICE"
}

###

### 10. Chấm điểm bài thi (Tính năng mới)
# @name gradeExam
POST http://localhost:5000/api/exams/{{examId}}/grade
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "answers": {
    "667bb4786d55737b8332194b": "highly",
    "667bb4786d55737b8332194c": "some answer",
    "667bb4786d55737b8332194d": "another answer"
  }
}

###
